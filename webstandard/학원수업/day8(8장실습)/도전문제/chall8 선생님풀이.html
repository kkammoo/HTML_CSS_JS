<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>겜블링 게임</title>
  <style>
    table {
      font-size: 50px;
      background-color: bisque;
    }

    td {
      padding: 20px;
    }

    #msg {
      color: red;
      font-size: 50px;
    }
  </style>
</head>

<body>
  <h3>겜블링 게임</h3>
  <p>각 숫자를 클릭하면 0에서 2사이의 난수로 바뀝니다. 모두 같은 수가 나오면 승리합니다.</p>
  <hr>
  <table>
    <tr>
      <td id="num1" onclick="slot(this)">0</td>
      <td id="num2" onclick="slot(this)">0</td>
      <td id="num3" onclick="slot(this)">0</td>
    </tr>
  </table>
  <p id="msg" onclick="reset()"></p>
  <script>
    function slot(obj) {
      const $msg = document.getElementById('msg');
      const num = genRandom(3);
      obj.innerHTML = num;

      if (obj.id == 'num3') {
        const num1 = parseInt(document.getElementById('num1').innerHTML);
        const num2 = parseInt(document.getElementById('num2').innerHTML);
        const num3 = parseInt(obj.innerHTML);

        if (num1 == num2 && num2 == num3) {
          $msg.innerHTML = "Success(click here to do again)";
        } else {
          $msg.innerHTML = "fail(click here to do again)";
        }
      }
    }
    // 0~n까지의 정수 난수 발생 함수
    function genRandom(n) {
      return Math.floor(Math.random() * n);
    }
    // 게임 초기화
    function reset() {
      const $msg = document.getElementById('msg');
      const $td = document.querySelectorAll('table tr td');
      for (let i = 0; i < $td.length; i++) {
        $td[i].innerHTML = 0;
      }
      // 메시지 초기화
      $msg.innerHTML = "";
    }
  </script>
</body>

</html>